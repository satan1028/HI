#include "par.h"
void plotallbins(){
    const double Ntrk[nbin]={ 334.3, 309.4, 289.4, 269.4, 249.4, 229.4, 201.6, 166.5, 134.1, 
            109.3, 89.2, 69.12, 54.38 };
    const double v26p[nbin] = { 0.08249, 0.08148, 0.08098, 0.07946, 0.0788, 0.07748, 0.07574, 0.07294, 0.06989, 
            0.06541, 0.06483, 0.05985, 0.06082 };
    const double v26errp[nbin] = { 0.0015497955040585194, 0.0015355281309373657, 0.0016342065871853535, 0.0015297722541607296, 0.001491184449523264, 0.0014537783099221146, 0.0014993313776480502, 0.001426496021059996, 0.0013474283461839447, 
            0.0018207531834106454, 0.0014755249198627586, 0.002714622721944985, 0.004693337450993696 };
    const double v28p[nbin] = { 0.08233, 0.08132, 0.08064, 0.07918, 0.07842, 0.07721, 0.0755, 0.0725, 0.06946, 
            0.06543, 0.06504, 0.0638 };
    const double v28errp[nbin] = { 0.0015544808916162335, 0.0015505198128692196, 0.0016556470504307372, 0.001533307856922412, 0.0014936789905799705, 0.0014753686387137283, 0.0015153234111568395, 0.0014943050818357008, 0.0014148349080016368, 
            0.0020213066985492333, 0.0018420360264403083, 0.004505192379477263 };
    double avgmult[nbin],avgtrk[nbin],v22[nbin],v22err[nbin],v24[nbin],v24err[nbin], v26[nbin],v26err[nbin], v28[nbin], v28err[nbin];
    double c22[nbin],c22err[nbin],c24[nbin],c24err[nbin], c26[nbin],c26err[nbin], c28[nbin],c28err[nbin];
    double qc22[nbin],qc22err[nbin],qc24[nbin],qc24err[nbin], qc26[nbin],qc26err[nbin], qc28[nbin],qc28err[nbin];
        TFile *f = TFile::Open(Form("%s_merged_effcorr.root",method.Data()));
        TVectorD *vavgtrk = (TVectorD*)f->Get("avgtrk");
        TVectorD *vv22 = (TVectorD*)f->Get("v22");
        TVectorD *vv24 = (TVectorD*)f->Get("v24");
        TVectorD *vv26 = (TVectorD*)f->Get("v26");
        TVectorD *vv28 = (TVectorD*)f->Get("v28");
        TVectorD *vc22 = (TVectorD*)f->Get("c22");
        TVectorD *vc24 = (TVectorD*)f->Get("c24");
        TVectorD *vc26 = (TVectorD*)f->Get("c26");
        TVectorD *vc28 = (TVectorD*)f->Get("c28");
        TVectorD *vqc22 = (TVectorD*)f->Get("qc22");
        TVectorD *vqc24 = (TVectorD*)f->Get("qc24");
        TVectorD *vqc26 = (TVectorD*)f->Get("qc26");
        TVectorD *vqc28 = (TVectorD*)f->Get("qc28");
        for(int ibin=0;ibin<nbin;ibin++){
        v22[ibin]=(*vv22)[ibin];
        v24[ibin]=(*vv24)[ibin];
        v26[ibin]=(*vv26)[ibin];
        v28[ibin]=(*vv28)[ibin];
        c22[ibin]=(*vc22)[ibin];
        c24[ibin]=-(*vc24)[ibin];
        c26[ibin]=(*vc26)[ibin];
        c28[ibin]=-(*vc28)[ibin];
        qc22[ibin]=(*vqc22)[ibin];
        qc24[ibin]=(*vqc24)[ibin];
        qc26[ibin]=(*vqc26)[ibin];
        qc28[ibin]=(*vqc28)[ibin];
        avgtrk[ibin]=(*vavgtrk)[ibin];
        }
    TGraphErrors *grv22 = new TGraphErrors(nbin,avgtrk,v22,0,0);
    TGraphErrors *grv24 = new TGraphErrors(nbin,avgtrk,v24,0,0);
    TGraphErrors *grv26 = new TGraphErrors(nbin,avgtrk,v26,0,0);
    TGraphErrors *grv28 = new TGraphErrors(nbin,avgtrk,v28,0,0);
    TGraphErrors *grv26p = new TGraphErrors(nbin,Ntrk,v26p,0,v26errp);
    TGraphErrors *grv28p = new TGraphErrors(nbin,Ntrk,v28p,0,v28errp);
    TGraphErrors *grc22 = new TGraphErrors(nbin,avgtrk,c22,0,0);
    TGraphErrors *grc24 = new TGraphErrors(nbin,avgtrk,c24,0,0);
    TGraphErrors *grc26 = new TGraphErrors(nbin,avgtrk,c26,0,0);
    TGraphErrors *grc28 = new TGraphErrors(nbin,avgtrk,c28,0,0);
    TGraphErrors *grqc22 = new TGraphErrors(nbin,avgtrk,qc22,0,0);
    TGraphErrors *grqc24 = new TGraphErrors(nbin,avgtrk,qc24,0,0);
    TGraphErrors *grqc26 = new TGraphErrors(nbin,avgtrk,qc26,0,0);
    TGraphErrors *grqc28 = new TGraphErrors(nbin,avgtrk,qc28,0,0);
     TLegend *leg = new TLegend(0.6,0.65,0.75,0.85);
     leg->SetTextSize(0.04);
    leg->SetFillColor(0);
    leg->SetBorderSize(0);

    TCanvas *c1 = new TCanvas("c1","c1",600,600);
    grv22->SetTitle("");
    grv22->GetXaxis()->SetTitle("Ntrkoffline");
    grv22->GetYaxis()->SetTitle("v_{2}");
    grv22->GetXaxis()->SetLimits(0,400);
    grv22->GetYaxis()->SetRangeUser(0.03,0.20);
    grv22->SetMarkerStyle(20);
    grv22->SetMarkerSize(1.2);
    grv24->SetMarkerStyle(24);
    grv24->SetMarkerColor(2);
    grv24->SetMarkerSize(1.2);
    grv26->SetMarkerStyle(29);
    grv26->SetMarkerColor(4);
    grv26->SetMarkerSize(1.2);
    grv28->SetMarkerStyle(34);
    grv28->SetMarkerColor(6);
    grv28->SetMarkerSize(1.2);
    grv26p->SetMarkerStyle(20);
    grv26p->SetMarkerColor(4);
    grv26p->SetMarkerSize(1.2);
    grv28p->SetMarkerStyle(35);
    grv28p->SetMarkerColor(6);
    grv28p->SetMarkerSize(1.2);
    leg->AddEntry(grv22,"v2{2}","lp");
    leg->AddEntry(grv24,"v2{4}","lp");
    leg->AddEntry(grv26,"v2{6}","lp");
    leg->AddEntry(grv28,"v2{8}","lp");
    leg->AddEntry(grv26p,"v2{6} from HIN-14-006","lp");
    leg->AddEntry(grv28p,"v2{8} from HIN-14-006","lp");
    grv22->Draw("AP");
    grv24->Draw("Psame");
    grv26->Draw("Psame");
    grv28->Draw("Psame");
    grv26p->Draw("Psame");
    grv28p->Draw("Psame");
    leg->Draw("same");
    c1->Print(Form("v2vsNtrk_effcorr.png"));

    TCanvas *c2 = new TCanvas("c2","c2",600,600);
    c2->SetLogy();
    grc22->SetTitle("");
    grc22->GetXaxis()->SetTitle("Ntrkoffline");
    grc22->GetYaxis()->SetTitle("c_{2}");
    grc22->GetXaxis()->SetLimits(0,400);
    grc22->GetYaxis()->SetRangeUser(1e-10,1);
    grc22->SetMarkerStyle(20);
    grc22->SetMarkerSize(1.2);
    grc24->SetMarkerStyle(24);
    grc24->SetMarkerColor(2);
    grc24->SetMarkerSize(1.2);
    grc26->SetMarkerStyle(29);
    grc26->SetMarkerColor(4);
    grc26->SetMarkerSize(1.2);
    grc28->SetMarkerStyle(34);
    grc28->SetMarkerColor(6);
    grc28->SetMarkerSize(1.2);
    TLegend *leg2 = new TLegend(*leg);
    leg2->Clear();
    leg2->AddEntry(grc22,"c2{2}","lp");
    grqc22->Draw("AP");
    leg2->AddEntry(grc24,"-c2{4}","lp");
    leg2->AddEntry(grc26,"c2{6}","lp");
    leg2->AddEntry(grc28,"-c2{8}","lp");
    grc22->Draw("AP");
    grc24->Draw("Psame");
    grc26->Draw("Psame");
    grc28->Draw("Psame");
    leg2->Draw("same");
    c2->Print(Form("c2vsNtrk_effcorr.png"));

    TCanvas *c3 = new TCanvas("c3","c3",600,600);
    c3->SetLogy();
    grqc22->SetTitle("");
    grqc22->GetXaxis()->SetTitle("Ntrkoffline");
    grqc22->GetYaxis()->SetTitle("qc_{2}");
    grqc22->GetXaxis()->SetLimits(0,400);
    grqc22->GetYaxis()->SetRangeUser(1e-10,1);
    grqc22->SetMarkerStyle(20);
    grqc22->SetMarkerSize(1.2);
    grqc24->SetMarkerStyle(24);
    grqc24->SetMarkerColor(2);
    grqc24->SetMarkerSize(1.2);
    grqc26->SetMarkerStyle(29);
    grqc26->SetMarkerColor(4);
    grqc26->SetMarkerSize(1.2);
    grqc28->SetMarkerStyle(34);
    grqc28->SetMarkerColor(6);
    grqc28->SetMarkerSize(1.2);
    TLegend *leg3 = new TLegend(*leg);
    leg3->Clear();
    leg3->AddEntry(grqc22,"qc2{2}","lp");
    leg3->AddEntry(grqc24,"qc2{4}","lp");
    leg3->AddEntry(grqc26,"qc2{6}","lp");
    leg3->AddEntry(grqc28,"qc2{8}","lp");
    grqc22->Draw("AP");
    grqc24->Draw("Psame");
    grqc26->Draw("Psame");
    grqc28->Draw("Psame");
    leg3->Draw("same");
    c3->Print(Form("qc2vsNtrk_effcorr.png"));
}

