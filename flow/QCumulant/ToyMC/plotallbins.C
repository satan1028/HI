void plotallbins(){
    int inV2=5; double inv2 = 0.0502;
    TString method = "closed";
    const int ntotbins = 6;
    int xbin=0;
    int dir[ntotbins] = {30,50,80,100,120,150};
    double avgmult[ntotbins],avgtrk[ntotbins],v22[ntotbins],v22err[ntotbins],v24[ntotbins],v24err[ntotbins], v26[ntotbins],v26err[ntotbins];
    double c22[ntotbins],c22err[ntotbins],c24[ntotbins],c24err[ntotbins], c26[ntotbins],c26err[ntotbins];
    double qc22[ntotbins],qc22err[ntotbins],qc24[ntotbins],qc24err[ntotbins], qc26[ntotbins],qc26err[ntotbins];
    for(int ibin=0;ibin<ntotbins;ibin++){
        TFile *f = TFile::Open(Form("pPbDataV20%dm%d/%s_merged.root",inV2,dir[ibin],method.Data()));
        TVectorD *vavgtrk = (TVectorD*)f->Get("avgtrk");
        TVectorD *vv22 = (TVectorD*)f->Get("v22");
        TVectorD *vv24 = (TVectorD*)f->Get("v24");
        TVectorD *vv26 = (TVectorD*)f->Get("v26");
        TVectorD *vc22 = (TVectorD*)f->Get("c22");
        TVectorD *vc24 = (TVectorD*)f->Get("c24");
        TVectorD *vc26 = (TVectorD*)f->Get("c26");
        TVectorD *vqc22 = (TVectorD*)f->Get("qc22");
        TVectorD *vqc24 = (TVectorD*)f->Get("qc24");
        TVectorD *vqc26 = (TVectorD*)f->Get("qc26");
        v22[ibin]=(*vv22)[xbin];
        v24[ibin]=(*vv24)[xbin];
        v26[ibin]=(*vv26)[xbin];
        c22[ibin]=(*vc22)[xbin];
        c24[ibin]=-(*vc24)[xbin];
        c26[ibin]=(*vc26)[xbin];
        qc22[ibin]=(*vqc22)[xbin];
        qc24[ibin]=(*vqc24)[xbin];
        qc26[ibin]=(*vqc26)[xbin];
        avgtrk[ibin]=(*vavgtrk)[xbin];
        }
    TGraphErrors *grv22 = new TGraphErrors(ntotbins,avgtrk,v22,0,0);
    TGraphErrors *grv24 = new TGraphErrors(ntotbins,avgtrk,v24,0,0);
    TGraphErrors *grv26 = new TGraphErrors(ntotbins,avgtrk,v26,0,0);
    TGraphErrors *grc22 = new TGraphErrors(ntotbins,avgtrk,c22,0,0);
    TGraphErrors *grc24 = new TGraphErrors(ntotbins,avgtrk,c24,0,0);
    TGraphErrors *grc26 = new TGraphErrors(ntotbins,avgtrk,c26,0,0);
    TGraphErrors *grqc22 = new TGraphErrors(ntotbins,avgtrk,qc22,0,0);
    TGraphErrors *grqc24 = new TGraphErrors(ntotbins,avgtrk,qc24,0,0);
    TGraphErrors *grqc26 = new TGraphErrors(ntotbins,avgtrk,qc26,0,0);
    TLine *l1 = new TLine(30,inv2,150,inv2);
    double inc22 = inv2*inv2;
    double inc24 = inv2*inv2*inv2*inv2;
    double inc26 = inv2*inv2*inv2*inv2*inv2*inv2*4;
    double inqc22 = inv2*inv2;
    double inqc24 = inv2*inv2*inv2*inv2;
    double inqc26 = inv2*inv2*inv2*inv2*inv2*inv2;
    TLine *l2 = new TLine(30,inc22,150,inc22);
    TLine *l3 = new TLine(30,inc24,150,inc24);
    TLine *l4 = new TLine(30,inc26,150,inc26);
    TLine *l5 = new TLine(30,inqc22,150,inqc22);
    TLine *l6 = new TLine(30,inqc24,150,inqc24);
    TLine *l7 = new TLine(30,inqc26,150,inqc26);
    l1->SetLineStyle(2);
    l2->SetLineStyle(2);
    l3->SetLineStyle(2);
    l4->SetLineStyle(2);
    l5->SetLineStyle(2);
    l6->SetLineStyle(2);
    l7->SetLineStyle(2);
     TLegend *leg = new TLegend(0.6,0.65,0.75,0.85);
    leg->SetFillColor(0);
    leg->SetBorderSize(0);

    TCanvas *c1 = new TCanvas("c1","c1",600,600);
    grv22->SetTitle("");
    grv22->GetXaxis()->SetTitle("Ntrkoffline");
    grv22->GetYaxis()->SetTitle("v_{2}");
    grv22->GetYaxis()->SetRangeUser(0.03,0.08);
    grv22->SetMarkerStyle(20);
    grv22->SetMarkerSize(1.2);
    grv24->SetMarkerStyle(24);
    grv24->SetMarkerColor(2);
    grv24->SetMarkerSize(1.2);
    grv26->SetMarkerStyle(29);
    grv26->SetMarkerColor(4);
    grv26->SetMarkerSize(1.2);
    leg->AddEntry(grv22,"v2{2}","lp");
    leg->AddEntry(grv24,"v2{4}","lp");
    leg->AddEntry(grv26,"v2{6}","lp");
    leg->AddEntry(l1,"input v2","l");
    grv22->Draw("AP");
    grv24->Draw("Psame");
    grv26->Draw("Psame");
    leg->Draw("same");
    l1->Draw("same");
    c1->Print(Form("v2vsNtrk_inV%d.png",inV2));

    TCanvas *c2 = new TCanvas("c2","c2",600,600);
    c2->SetLogy();
    grc22->SetTitle("");
    grc22->GetXaxis()->SetTitle("Ntrkoffline");
    grc22->GetYaxis()->SetTitle("c_{2}");
    grc22->GetYaxis()->SetRangeUser(1e-10,0.01);
    grc22->SetMarkerStyle(20);
    grc22->SetMarkerSize(1.2);
    grc24->SetMarkerStyle(24);
    grc24->SetMarkerColor(2);
    grc24->SetMarkerSize(1.2);
    grc26->SetMarkerStyle(29);
    grc26->SetMarkerColor(4);
    grc26->SetMarkerSize(1.2);
    TLegend *leg2 = new TLegend(*leg);
    leg2->Clear();
    leg2->AddEntry(grc22,"c2{2}","lp");
    leg2->AddEntry(grc24,"-c2{4}","lp");
    leg2->AddEntry(grc26,"c2{6}","lp");
    leg2->AddEntry(l2,"input c2{2}","l");
    leg2->AddEntry(l3,"input -c2{4}","l");
    leg2->AddEntry(l4,"input c2{6}","l");
    grc22->Draw("AP");
    grc24->Draw("Psame");
    grc26->Draw("Psame");
    leg2->Draw("same");
    l2->Draw("same");
    l3->Draw("same");
    l4->Draw("same");
    c2->Print(Form("c2vsNtrk_inV%d.png",inV2));

    TCanvas *c3 = new TCanvas("c3","c3",600,600);
    c3->SetLogy();
    grqc22->SetTitle("");
    grqc22->GetXaxis()->SetTitle("Ntrkoffline");
    grqc22->GetYaxis()->SetTitle("qc_{2}");
    grqc22->GetYaxis()->SetRangeUser(1e-10,0.01);
    grqc22->SetMarkerStyle(20);
    grqc22->SetMarkerSize(1.2);
    grqc24->SetMarkerStyle(24);
    grqc24->SetMarkerColor(2);
    grqc24->SetMarkerSize(1.2);
    grqc26->SetMarkerStyle(29);
    grqc26->SetMarkerColor(4);
    grqc26->SetMarkerSize(1.2);
    TLegend *leg3 = new TLegend(*leg);
    leg3->Clear();
    leg3->AddEntry(grqc22,"qc2{2}","lp");
    leg3->AddEntry(grqc24,"qc2{4}","lp");
    leg3->AddEntry(grqc26,"qc2{6}","lp");
    leg3->AddEntry(l5,"input qc2{2}","l");
    leg3->AddEntry(l6,"input qc2{4}","l");
    leg3->AddEntry(l7,"input qc2{6}","l");
    grqc22->Draw("AP");
    grqc24->Draw("Psame");
    grqc26->Draw("Psame");
    leg3->Draw("same");
    l5->Draw("same");
    l6->Draw("same");
    l7->Draw("same");
    c3->Print(Form("qc2vsNtrk_inV%d.png",inV2));
}

